{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\franc\\\\Documents\\\\practicas\\\\CodeSoft2\\\\Front\\\\src\\\\App.js\";\n//import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Home from './container/Home';\nimport Login from './container/Login'; //import Signup from './containers/Signup';\n//import Activate from './containers/Activate';\n//import ResetPassword from './containers/ResetPassword';\n//import ResetPasswordConfirm from './containers/ResetPasswordConfirm';\n//import store from './store';\n//import Layout from './hocs/Layout';\n\nimport React, { Component } from 'react';\nimport './App.css';\nimport NavComponent from './components/NavComponent';\nconst base_url = window.SERVER_ADDRESS;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.display_form = formName => {\n      this.setState({\n        displayed_form: formName\n      });\n    };\n\n    this.handleLoginChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleLogout = () => {\n      localStorage.removeItem('token');\n      this.setState({\n        logged_in: false,\n        username: ''\n      });\n    };\n\n    this.handleLogin = (e, data) => {\n      e.preventDefault();\n      console.log(data);\n      fetch(base_url + 'token-auth/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(response => response.json()).then(json => {\n        localStorage.setItem('token', json.token);\n        this.setState({\n          logged_in: true //username : json.user.username\n\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n      this.setState({\n        displayed_form: ''\n      });\n    };\n\n    this.state = {\n      logged_in: localStorage.getItem('token') ? true : false,\n      username: '',\n      displayed_form: ''\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.logged_in) {\n      fetch(base_url + 'users/current_user/', {\n        method: 'GET',\n        headers: {\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        }\n      }).then(res => res.json()).then(resp => {\n        console.log(resp.username);\n        this.setState({\n          username: resp.username\n        });\n      }).catch(err => console.log(err));\n    }\n  }\n\n  render() {\n    const {\n      logged_in,\n      username,\n      displayed_form\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(NavComponent, {\n      logged_in: logged_in,\n      handleLogin: this.handleLogin,\n      handleLoginChange: this.handleLoginChange,\n      handleLogout: this.handleLogout,\n      username: username,\n      displayed_form: displayed_form,\n      display_form: this.display_form,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 5\n      }\n    }, this.state.logged_in ? `Hello ${this.state.username}` : 'Please log in'));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/franc/Documents/practicas/CodeSoft2/Front/src/App.js"],"names":["BrowserRouter","Router","Route","Switch","Home","Login","React","Component","NavComponent","base_url","window","SERVER_ADDRESS","App","constructor","props","display_form","formName","setState","displayed_form","handleLoginChange","event","target","name","value","handleLogout","localStorage","removeItem","logged_in","username","handleLogin","e","data","preventDefault","console","log","fetch","method","headers","body","JSON","stringify","then","response","json","setItem","token","catch","error","state","getItem","componentDidMount","Authorization","res","resp","err","render"],"mappings":";AACA;AACA,SAASA,aAAa,IAAIC,MAA1B,EAAkCC,KAAlC,EAAyCC,MAAzC,QAAuD,kBAAvD;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,KAAP,MAAkB,mBAAlB,C,CACA;AACA;AACA;AACA;AAEA;AAEA;;AAGA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AAEA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,cAAxB;;AACA,MAAMC,GAAN,SAAkBL,SAAlB,CAA4B;AAC3BM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;;AADkB,SA2BnBC,YA3BmB,GA2BHC,QAAD,IAAc;AACtB,WAAKC,QAAL,CAAc;AACVC,QAAAA,cAAc,EAAGF;AADP,OAAd;AAGH,KA/Be;;AAAA,SAiCnBG,iBAjCmB,GAiCCC,KAAK,IAAI;AACtB,WAAKH,QAAL,CAAc;AACV,SAACG,KAAK,CAACC,MAAN,CAAaC,IAAd,GAAsBF,KAAK,CAACC,MAAN,CAAaE;AADzB,OAAd;AAGN,KArCkB;;AAAA,SAuCnBC,YAvCmB,GAuCJ,MAAM;AACpBC,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACA,WAAKT,QAAL,CAAc;AAACU,QAAAA,SAAS,EAAG,KAAb;AAAoBC,QAAAA,QAAQ,EAAG;AAA/B,OAAd;AACA,KA1CkB;;AAAA,SA4CnBC,WA5CmB,GA4CL,CAACC,CAAD,EAAIC,IAAJ,KAAa;AAC1BD,MAAAA,CAAC,CAACE,cAAF;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAI,MAAAA,KAAK,CAAC1B,QAAQ,GAAG,aAAZ,EAA2B;AAC/B2B,QAAAA,MAAM,EAAG,MADsB;AAE/BC,QAAAA,OAAO,EAAG;AACT,0BAAiB;AADR,SAFqB;AAK/BC,QAAAA,IAAI,EAAGC,IAAI,CAACC,SAAL,CAAeT,IAAf;AALwB,OAA3B,CAAL,CAOCU,IAPD,CAOMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPlB,EAQCF,IARD,CAQME,IAAI,IAAI;AACblB,QAAAA,YAAY,CAACmB,OAAb,CAAqB,OAArB,EAA8BD,IAAI,CAACE,KAAnC;AACA,aAAK5B,QAAL,CAAc;AACbU,UAAAA,SAAS,EAAG,IADC,CAEb;;AAFa,SAAd;AAIA,OAdD,EAeCmB,KAfD,CAeOC,KAAK,IAAI;AACfd,QAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;AACA,OAjBD;AAkBA,WAAK9B,QAAL,CAAc;AACbC,QAAAA,cAAc,EAAG;AADJ,OAAd;AAGA,KApEkB;;AAGlB,SAAK8B,KAAL,GAAa;AACXrB,MAAAA,SAAS,EAAGF,YAAY,CAACwB,OAAb,CAAqB,OAArB,IAAgC,IAAhC,GAAuC,KADxC;AAEXrB,MAAAA,QAAQ,EAAG,EAFA;AAGXV,MAAAA,cAAc,EAAG;AAHN,KAAb;AAKA;;AAEDgC,EAAAA,iBAAiB,GAAE;AAClB,QAAG,KAAKF,KAAL,CAAWrB,SAAd,EAAwB;AACvBQ,MAAAA,KAAK,CAAC1B,QAAQ,GAAG,qBAAZ,EAAmC;AACvC2B,QAAAA,MAAM,EAAG,KAD8B;AAEvCC,QAAAA,OAAO,EAAG;AACTc,UAAAA,aAAa,EAAI,OAAM1B,YAAY,CAACwB,OAAb,CAAqB,OAArB,CAA8B;AAD5C;AAF6B,OAAnC,CAAL,CAMCR,IAND,CAMMW,GAAG,IAAIA,GAAG,CAACT,IAAJ,EANb,EAOCF,IAPD,CAOMY,IAAI,IAAI;AACTpB,QAAAA,OAAO,CAACC,GAAR,CAAYmB,IAAI,CAACzB,QAAjB;AACJ,aAAKX,QAAL,CAAc;AAAEW,UAAAA,QAAQ,EAAGyB,IAAI,CAACzB;AAAlB,SAAd;AACA,OAVD,EAWCkB,KAXD,CAWOQ,GAAG,IAAIrB,OAAO,CAACC,GAAR,CAAYoB,GAAZ,CAXd;AAYA;AACD;;AA4CDC,EAAAA,MAAM,GAAG;AACR,UAAM;AAAE5B,MAAAA,SAAF;AAAaC,MAAAA,QAAb;AAAuBV,MAAAA;AAAvB,QAA0C,KAAK8B,KAArD;AACA,wBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC,oBAAC,YAAD;AACA,MAAA,SAAS,EAAIrB,SADb;AAEA,MAAA,WAAW,EAAI,KAAKE,WAFpB;AAGA,MAAA,iBAAiB,EAAI,KAAKV,iBAH1B;AAIA,MAAA,YAAY,EAAI,KAAKK,YAJrB;AAKA,MAAA,QAAQ,EAAII,QALZ;AAMA,MAAA,cAAc,EAAIV,cANlB;AAOA,MAAA,YAAY,EAAI,KAAKH,YAPrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,eAUC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAKiC,KAAL,CAAWrB,SAAX,GACG,SAAQ,KAAKqB,KAAL,CAAWpB,QAAS,EAD/B,GAEE,eAHH,CAVD,CADD;AAkBA;;AA1F0B;;AA6F5B,eAAehB,GAAf","sourcesContent":["  \n//import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Home from './container/Home';\nimport Login from './container/Login';\n//import Signup from './containers/Signup';\n//import Activate from './containers/Activate';\n//import ResetPassword from './containers/ResetPassword';\n//import ResetPasswordConfirm from './containers/ResetPasswordConfirm';\n\n//import store from './store';\n\n//import Layout from './hocs/Layout';\n\n\nimport React, { Component } from 'react';\nimport './App.css';\nimport NavComponent from './components/NavComponent';\n\nconst base_url = window.SERVER_ADDRESS\nclass App extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\t logged_in : localStorage.getItem('token') ? true : false,\n\t\t\t username : '',\n\t\t\t displayed_form : ''\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tif(this.state.logged_in){\n\t\t\tfetch(base_url + 'users/current_user/', {\n\t\t\t\tmethod : 'GET',\n\t\t\t\theaders : {\n\t\t\t\t\tAuthorization : `JWT ${localStorage.getItem('token')}`\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(resp => {\n        console.log(resp.username)\n\t\t\t\tthis.setState({ username : resp.username })\n\t\t\t})\n\t\t\t.catch(err => console.log(err));\n\t\t}\n\t}\n\n\tdisplay_form = (formName) => {\n        this.setState({\n            displayed_form : formName\n        });\n    }\n\n\thandleLoginChange = event => {\n        this.setState({\n            [event.target.name] : event.target.value\n        })\n\t}\n\t\n\thandleLogout = () => {\n\t\tlocalStorage.removeItem('token');\n\t\tthis.setState({logged_in : false, username : ''})\n\t}\n\n\thandleLogin = (e, data) => {\n\t\te.preventDefault();\n\t\tconsole.log(data)\n\t\tfetch(base_url + 'token-auth/', {\n\t\t\tmethod : 'POST',\n\t\t\theaders : {\n\t\t\t\t'Content-Type' : 'application/json',\n\t\t\t},\n\t\t\tbody : JSON.stringify(data)\n\t\t})\n\t\t.then(response => response.json())\n\t\t.then(json => {\n\t\t\tlocalStorage.setItem('token', json.token);\n\t\t\tthis.setState({\n\t\t\t\tlogged_in : true,\n\t\t\t\t//username : json.user.username\n\t\t\t})\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.log(error)\n\t\t})\n\t\tthis.setState({\n\t\t\tdisplayed_form : ''\n\t\t})\n\t}\n\trender() {\n\t\tconst { logged_in, username, displayed_form } = this.state;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<NavComponent\n\t\t\t\tlogged_in = {logged_in}\n\t\t\t\thandleLogin = {this.handleLogin}\n\t\t\t\thandleLoginChange = {this.handleLoginChange}\n\t\t\t\thandleLogout = {this.handleLogout}\n\t\t\t\tusername = {username}\n\t\t\t\tdisplayed_form = {displayed_form}\n\t\t\t\tdisplay_form = {this.display_form}\n\t\t\t\t />\n\t\t\t\t<h3>{\n\t\t\t\t\tthis.state.logged_in\n\t\t\t\t\t? `Hello ${this.state.username}`\n\t\t\t\t\t: 'Please log in'\n\t\t\t\t}</h3>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}