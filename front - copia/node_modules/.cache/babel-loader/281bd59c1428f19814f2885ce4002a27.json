{"ast":null,"code":"import axios from 'axios';\nimport * as actionTypes from './types';\nexport const authStart = () => {\n  return {\n    type: actionTypes.AUTH_START\n  };\n};\nexport const authSuccess = (token, usuario) => {\n  return {\n    type: actionTypes.AUTH_SUCCESS,\n    token: token,\n    usuario: usuario\n  };\n};\nexport const authFail = error => {\n  return {\n    type: actionTypes.AUTH_FAIL,\n    error: error\n  };\n};\nexport const authlogout = () => {\n  return {\n    type: actionTypes.AUTH_LOGOUT\n  };\n};\nexport const authLogin = (username, password) => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  return dispatch => {\n    dispatch(authStart());\n    axios.post('http://127.0.0.1:8000/api-auth/login/', {\n      username: username,\n      password: password\n    }, config).then(res => {\n      const token = res.data.token;\n      const usuario = res.data.user.profile.tipo_usuario;\n      localStorage.setItem('token', token);\n      localStorage.setItem('authenticate', true);\n      localStorage.setItem('usuario', usuario);\n      dispatch(authSuccess(token, usuario));\n    }).catch(err => {\n      dispatch(authFail(err));\n    });\n  };\n};","map":{"version":3,"sources":["C:/Users/franc/Documents/practicas/CodeSoft2/Front/src/action/auth.js"],"names":["axios","actionTypes","authStart","type","AUTH_START","authSuccess","token","usuario","AUTH_SUCCESS","authFail","error","AUTH_FAIL","authlogout","AUTH_LOGOUT","authLogin","username","password","config","headers","dispatch","post","then","res","data","user","profile","tipo_usuario","localStorage","setItem","catch","err"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,WAAZ,MAA6B,SAA7B;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAM;AAC3B,SAAO;AACHC,IAAAA,IAAI,EAAEF,WAAW,CAACG;AADf,GAAP;AAGH,CAJM;AAMP,OAAO,MAAMC,WAAW,GAAG,CAACC,KAAD,EAAQC,OAAR,KAAoB;AAC3C,SAAO;AACHJ,IAAAA,IAAI,EAAEF,WAAW,CAACO,YADf;AAEHF,IAAAA,KAAK,EAAEA,KAFJ;AAGHC,IAAAA,OAAO,EAAEA;AAHN,GAAP;AAKH,CANM;AAQP,OAAO,MAAME,QAAQ,GAAGC,KAAK,IAAI;AAC7B,SAAO;AACHP,IAAAA,IAAI,EAAEF,WAAW,CAACU,SADf;AAEHD,IAAAA,KAAK,EAAEA;AAFJ,GAAP;AAIH,CALM;AAOP,OAAO,MAAME,UAAU,GAAG,MAAM;AAC5B,SAAO;AACHT,IAAAA,IAAI,EAAEF,WAAW,CAACY;AADf,GAAP;AAGH,CAJM;AAOP,OAAO,MAAMC,SAAS,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC7C,QAAMC,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX;AADE,GAAf;AAKA,SAAOC,QAAQ,IAAI;AACfA,IAAAA,QAAQ,CAACjB,SAAS,EAAV,CAAR;AAEAF,IAAAA,KAAK,CAACoB,IAAN,CAAW,uCAAX,EAAoD;AAChDL,MAAAA,QAAQ,EAAEA,QADsC;AAEhDC,MAAAA,QAAQ,EAAEA;AAFsC,KAApD,EAGGC,MAHH,EAIKI,IAJL,CAIUC,GAAG,IAAI;AACT,YAAMhB,KAAK,GAAGgB,GAAG,CAACC,IAAJ,CAASjB,KAAvB;AACA,YAAMC,OAAO,GAAGe,GAAG,CAACC,IAAJ,CAASC,IAAT,CAAcC,OAAd,CAAsBC,YAAtC;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BtB,KAA9B;AACAqB,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqC,IAArC;AACAD,MAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCrB,OAAhC;AACAY,MAAAA,QAAQ,CAACd,WAAW,CAACC,KAAD,EAAQC,OAAR,CAAZ,CAAR;AACH,KAXL,EAYKsB,KAZL,CAYWC,GAAG,IAAI;AACVX,MAAAA,QAAQ,CAACV,QAAQ,CAACqB,GAAD,CAAT,CAAR;AACH,KAdL;AAeH,GAlBD;AAmBH,CAzBM","sourcesContent":["import axios from 'axios';\r\nimport * as actionTypes from './types';\r\n\r\nexport const authStart = () => {\r\n    return {\r\n        type: actionTypes.AUTH_START\r\n    }\r\n}\r\n\r\nexport const authSuccess = (token, usuario) => {\r\n    return {\r\n        type: actionTypes.AUTH_SUCCESS,\r\n        token: token, \r\n        usuario: usuario\r\n    }\r\n}\r\n\r\nexport const authFail = error => {\r\n    return {\r\n        type: actionTypes.AUTH_FAIL,\r\n        error: error\r\n    }\r\n}\r\n\r\nexport const authlogout = () => {\r\n    return {\r\n        type: actionTypes.AUTH_LOGOUT\r\n    }\r\n}\r\n\r\n\r\nexport const authLogin = (username, password) => {\r\n    const config = {\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        }\r\n    }\r\n    return dispatch => {\r\n        dispatch(authStart());\r\n\r\n        axios.post('http://127.0.0.1:8000/api-auth/login/', {\r\n            username: username,\r\n            password: password\r\n        }, config)\r\n            .then(res => {\r\n                const token = res.data.token;\r\n                const usuario = res.data.user.profile.tipo_usuario;\r\n                localStorage.setItem('token', token);\r\n                localStorage.setItem('authenticate', true);\r\n                localStorage.setItem('usuario', usuario);\r\n                dispatch(authSuccess(token, usuario ));\r\n            })\r\n            .catch(err => {\r\n                dispatch(authFail(err));\r\n            }) \r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}